<!DOCTYPE html>
<html>

<head>
  <!-- Google Tag Manager -->
  <!-- <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-PJ9XW48');</script> -->
  <!-- End Google Tag Manager -->
</head>

<body>
  <!-- Google Tag Manager (noscript) -->
  <!-- <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PJ9XW48"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> -->
  <!-- End Google Tag Manager (noscript) -->
  <br><br><br><br>
  <h3>Index Page</h3>
  <br><br><br><br>
  <a href="page2.html">Page 2</a><br>
  <a href="page3.html">Page 3</a><br>
  <br><br><br><br>
</body>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script src="https://www.googletagmanager.com/gtag/js?id=UA-137952485-1"></script>
<script>
  function uuid4() {
    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
      var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
      return v.toString(16);
    });
  }

  var sessionId = sessionStorage.getItem('sessionId');
  var pageViewActivityId = uuid4();
  if (!sessionId) {
    sessionId = uuid4();
    sessionStorage.setItem('sessionId', sessionId);
  }

  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());
  gtag('config', 'UA-137952485-1', {
    'custom_map': {
      'dimension1': 'clientId',
      'dimension2': 'sessionId',
      'dimension3': 'pageActivityId'
    },
    'send_page_view': false
  });

  gtag('event', 'page_view', {
    'pageActivityId': pageViewActivityId,
    'sessionId': sessionId
  });

  // gtag('event', 'test_custom_event', { 'testDimensionValue': uuid4() });
  // gtag('event', 'login', { 'method': 'Google' });

  ga('create', 'UA-137952485-1', 'auto');
  // ga('set', 'dimension4', uuid4());

  ga(function(tracker) {
    var clientId = tracker.get('clientId');
    console.log('Cliend ID', clientId);
    ga('set', 'dimension4', uuid4());
    ga('send', 'pageview');
  });
</script>

</html>